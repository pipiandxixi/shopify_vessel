{%- comment -%}
  Centralized SEO structured data additions:
  - WebSite + SearchAction (sitewide)
  - BreadcrumbList (contextual: product, collection, article)
{%- endcomment -%}

{%- assign site_url = request.origin -%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": {{ site_url | json }},
  "name": {{ shop.name | json }},
  "potentialAction": {
    "@type": "SearchAction",
    "target": {{ routes.search_url | append: "?q={search_term_string}" | absolute_url | json }},
    "query-input": "required name=search_term_string"
  }
}
</script>

{%- comment -%} Breadcrumbs by page type {%- endcomment -%}
{%- if request.page_type == 'product' and product -%}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": {{ routes.root_url | absolute_url | json }}
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": {{ product.title | json }},
        "item": {{ product.url | absolute_url | json }}
      }
    ]
  }
  </script>
{%- elsif request.page_type == 'collection' and collection -%}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": {{ routes.root_url | absolute_url | json }}
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": {{ collection.title | json }},
        "item": {{ collection.url | absolute_url | json }}
      }
    ]
  }
  </script>
{%- elsif request.page_type == 'article' and article -%}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": {{ routes.root_url | absolute_url | json }}
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": {{ blog.title | default: 'Blog' | json }},
        "item": {{ blog.url | absolute_url | json }}
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": {{ article.title | json }},
        "item": {{ article.url | absolute_url | json }}
      }
    ]
  }
  </script>
{%- endif -%}

